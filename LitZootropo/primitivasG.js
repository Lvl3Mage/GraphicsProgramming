// ---------------------------------------------------------------------------
// Primitivas geometricas basicas
// J. Ribelles, A. Lopez
// Mayo 2018
// ---------------------------------------------------------------------------

var plano = {  // 4 vértices, 2 triángulos, 4 aristas

    primitiva : WebGLRenderingContext.TRIANGLE_STRIP,

    "vertices" : [-0.5, 0.0, 0.5,   0.0, 1.0, 0.0,   0.0, 0.0,    // vertex + normal + texcoords
        0.5, 0.0, 0.5,   0.0, 1.0, 0.0,   1.0, 0.0,
        -0.5, 0.0,-0.5,   0.0, 1.0, 0.0,   0.0, 1.0,
        0.5, 0.0,-0.5,   0.0, 1.0, 0.0,   1.0, 1.0]

//  "indices" :  [ 0, 1, 3, 2]

};

var cubo = {  // 24 vértices, 12 triángulos, 12 aristas

    primitiva : WebGLRenderingContext.TRIANGLES,

    "vertices" : [-0.5, -0.5,  0.5,   0.0,  0.0,  1.0,   0.0, 0.0,
        0.5, -0.5,  0.5,   0.0,  0.0,  1.0,   1.0, 0.0,
        0.5,  0.5,  0.5,   0.0,  0.0,  1.0,   1.0, 1.0,
        -0.5,  0.5,  0.5,   0.0,  0.0,  1.0,   0.0, 1.0,
        0.5, -0.5,  0.5,   1.0,  0.0,  0.0,   0.0, 0.0,
        0.5, -0.5, -0.5,   1.0,  0.0,  0.0,   1.0, 0.0,
        0.5,  0.5, -0.5,   1.0,  0.0,  0.0,   1.0, 1.0,
        0.5,  0.5,  0.5,   1.0,  0.0,  0.0,   0.0, 1.0,
        0.5, -0.5, -0.5,   0.0,  0.0, -1.0,   0.0, 0.0,
        -0.5, -0.5, -0.5,   0.0,  0.0, -1.0,   1.0, 0.0,
        -0.5,  0.5, -0.5,   0.0,  0.0, -1.0,   1.0, 1.0,
        0.5,  0.5, -0.5,   0.0,  0.0, -1.0,   0.0, 1.0,
        -0.5, -0.5, -0.5,  -1.0,  0.0,  0.0,   0.0, 0.0,
        -0.5, -0.5,  0.5,  -1.0,  0.0,  0.0,   1.0, 0.0,
        -0.5,  0.5,  0.5,  -1.0,  0.0,  0.0,   1.0, 1.0,
        -0.5,  0.5, -0.5,  -1.0,  0.0,  0.0,   0.0, 1.0,
        -0.5,  0.5,  0.5,   0.0,  1.0,  0.0,   0.0, 0.0,
        0.5,  0.5,  0.5,   0.0,  1.0,  0.0,   1.0, 0.0,
        0.5,  0.5, -0.5,   0.0,  1.0,  0.0,   1.0, 1.0,
        -0.5,  0.5, -0.5,   0.0,  1.0,  0.0,   0.0, 1.0,
        -0.5, -0.5, -0.5,   0.0, -1.0,  0.0,   0.0, 0.0,
        0.5, -0.5, -0.5,   0.0, -1.0,  0.0,   1.0, 0.0,
        0.5, -0.5,  0.5,   0.0, -1.0,  0.0,   1.0, 1.0,
        -0.5, -0.5,  0.5,   0.0, -1.0,  0.0,   0.0, 1.0],

    "indices" :  [  0,  1,  2,  0,  2,  3,
        4,  5,  6,  4,  6,  7,
        8,  9, 10,  8, 10, 11,
        12, 13, 14, 12, 14, 15,
        16, 17, 18, 16, 18, 19,
        20, 21, 22, 20, 22, 23]

};

var tapa = {  // 13 vértices, 12 triángulos, 24 aristas

    primitiva : WebGLRenderingContext.TRIANGLE_FAN,

    "vertices" : [ 1,  0, 0,  0, 0, 1,  1,     0.5,
        0.866,  0.5,   0, 0, 0, 1,  0.933, 0.75,
        0.5,    0.866, 0, 0, 0, 1,0.75,  0.933,
        0,  1, 0,  0, 0, 1, 0.5,   1,
        -0.5,    0.866, 0, 0, 0, 1, 0.25,  0.933,
        -0.86,   0.5,   0, 0, 0, 1, 0.07,  0.75,
        -1,  0, 0,  0, 0, 1, 0,     0.5,
        -0.866, -0.5,   0, 0, 0, 1, 0.067, 0.25,
        -0.5,   -0.866, 0, 0, 0, 1,0.25,  0.067,
        0, -1, 0,  0, 0, 1,  0.5,   0,
        0.5, -0.866, 0, 0, 0, 1,  0.75,  0.067,
        0.866, -0.5,   0, 0, 0, 1,  0.933, 0.25]

//  "indices" : [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]

};

var cono = {  // 24 vértices, 12 triángulos, 24 aristas

    primitiva : WebGLRenderingContext.TRIANGLES,

    "vertices" : [ 1.000,  0.000, 0.000,  0.707,  0.000, 0.707, 1.00, 0.50,
        0.000,  0.000, 1.000,  0, 0, 1, 0.50, 0.50,
        0.866,  0.500, 0.000,  0.612,  0.354, 0.707, 0.93, 0.75,
        0.000,  0.000, 1.000,  0, 0, 1, 0.50, 0.50,
        0.500,  0.866, 0.000,  0.354,  0.612, 0.707, 0.75, 0.93,
        0.000,  0.000, 1.000,  0, 0, 1, 0.50, 0.50,
        0.000,  1.000, 0.000,  0.000,  0.707, 0.707, 0.50, 1.00,
        0.000,  0.000, 1.000,  0, 0, 1, 0.50, 0.50,
        -0.500,  0.866, 0.000, -0.354,  0.612, 0.707, 0.25, 0.93,
        0.000,  0.000, 1.000,  0, 0, 1, 0.50, 0.50,
        -0.866,  0.500, 0.000, -0.612,  0.354, 0.707, 0.07, 0.75,
        0.000,  0.000, 1.000,  0, 0, 1, 0.50, 0.50,
        -1.000,  0.000, 0.000, -0.707,  0.000, 0.707, 0.00, 0.50,
        0.000,  0.000, 1.000,  0, 0, 1, 0.50, 0.50,
        -0.866, -0.500, 0.000, -0.612, -0.354, 0.707, 0.07, 0.25,
        0.000,  0.000, 1.000,  0, 0, 1, 0.50, 0.50,
        -0.500, -0.866, 0.000, -0.354, -0.612, 0.707, 0.25, 0.07,
        0.000,  0.000, 1.000,  0, 0, 1, 0.50, 0.50,
        0.000, -1.000, 0.000, -0.000, -0.707, 0.707, 0.50, 0.00,
        0.000,  0.000, 1.000,  0, 0, 1, 0.50, 0.50,
        0.500, -0.866, 0.000,  0.354, -0.612, 0.707, 0.75, 0.07,
        0.000,  0.000, 1.000,  0, 0, 1, 0.50, 0.50,
        0.866, -0.500, 0.000,  0.612, -0.354, 0.707, 0.93, 0.25,
        0.000,  0.000, 1.000,  0, 0, 1, 0.50, 0.50],

    "indices" : [  0,  2,  1,  2,  4,  3,  4,  6,  5,  6,  8,  7,  8, 10,  9, 10, 12, 11,
        12, 14, 13, 14, 16, 15, 16, 18, 17, 18, 20, 19, 20, 22, 21, 22,  0, 23]

};

var cilindro = {  // 24 vértices, 24 triángulos, 36 aristas

    primitiva : WebGLRenderingContext.TRIANGLE_STRIP,

    "vertices" : [ 1.000,  0.000, 0.000,  1.000,  0.000, 0.000, 0.000, 0.000,
        0.866,  0.500, 0.000,  0.866,  0.500, 0.000, 0.083, 0.000,
        0.500,  0.866, 0.000,  0.500,  0.866, 0.000, 0.167, 0.000,
        0.000,  1.000, 0.000,  0.000,  1.000, 0.000, 0.250, 0.000,
        -0.500,  0.866, 0.000, -0.500,  0.866, 0.000, 0.333, 0.000,
        -0.860,  0.500, 0.000, -0.860,  0.500, 0.000, 0.417, 0.000,
        -1.000,  0.000, 0.000, -1.000,  0.000, 0.000, 0.500, 0.000,
        -0.866, -0.500, 0.000, -0.866, -0.500, 0.000, 0.583, 0.000,
        -0.500, -0.866, 0.000, -0.500, -0.866, 0.000, 0.667, 0.000,
        0.000, -1.000, 0.000,  0.000, -1.000, 0.000, 0.750, 0.000,
        0.500, -0.866, 0.000,  0.500, -0.866, 0.000, 0.833, 0.000,
        0.866, -0.500, 0.000,  0.866, -0.500, 0.000, 0.917, 0.000,
        1.000,  0.000, 0.000,  1.000,  0.000, 0.000, 1.000, 0.000,
        1.000,  0.000, 1.000,  1.000,  0.000, 0.000, 0.000, 1.000,
        0.866,  0.500, 1.000,  0.866,  0.500, 0.000, 0.083, 1.000,
        0.500,  0.866, 1.000,  0.500,  0.866, 0.000, 0.167, 1.000,
        0.000,  1.000, 1.000,  0.000,  1.000, 0.000, 0.250, 1.000,
        -0.500,  0.866, 1.000, -0.500,  0.866, 0.000, 0.333, 1.000,
        -0.860,  0.500, 1.000, -0.860,  0.500, 0.000, 0.417, 1.000,
        -1.000,  0.000, 1.000, -1.000,  0.000, 0.000, 0.500, 1.000,
        -0.866, -0.500, 1.000, -0.866, -0.500, 0.000, 0.583, 1.000,
        -0.500, -0.866, 1.000, -0.500, -0.866, 0.000, 0.667, 1.000,
        0.000, -1.000, 1.000,  0.000, -1.000, 0.000, 0.750, 1.000,
        0.500, -0.866, 1.000,  0.500, -0.866, 0.000, 0.833, 1.000,
        0.866, -0.500, 1.000,  0.866, -0.500, 0.000, 0.917, 1.000,
        1.000,  0.000, 1.000,  1.000,  0.000, 0.000, 1.000, 1.000],

    "indices" : [ 13, 0, 14, 1, 15, 2, 16, 3, 17, 4, 18, 5, 19, 6, 20, 7, 21, 8, 22, 9, 23, 10, 24, 11, 25, 12]


};

var esfera = {  // 42 vértices, 80 triángulos, 120 aristas

    primitiva : WebGLRenderingContext.TRIANGLES,

    "vertices" : [ 0.000,  0.851,  0.526,  0.000,  0.851,  0.526, 0.500, 0.763,
        -0.309,  0.500,  0.809, -0.309,  0.500,  0.809, 0.346, 0.905,
        0.309,  0.500,  0.809,  0.309,  0.500,  0.809, 0.654, 0.905,
        -0.526,  0.000,  0.851, -0.526,  0.000,  0.851, 0.237, 0.925,
        0.000,  0.000,  1.000,  0.000,  0.000,  1.000, 0.500, 1.000,
        0.526,  0.000,  0.851,  0.526,  0.000,  0.851, 0.763, 0.925,
        -0.851,  0.526,  0.000, -0.851,  0.526,  0.000, 0.075, 0.500,
        -0.809,  0.309,  0.500, -0.809,  0.309,  0.500, 0.095, 0.750,
        -0.500,  0.809,  0.309, -0.500,  0.809,  0.309, 0.250, 0.654,
        0.000,  0.851, -0.526,  0.000,  0.851, -0.526, 0.500, 0.237,
        -0.500,  0.809, -0.309, -0.500,  0.809, -0.309, 0.250, 0.346,
        0.000,  1.000,  0.000,  0.000,  1.000,  0.000, 0.500, 0.500,
        0.500,  0.809, -0.309,  0.500,  0.809, -0.309, 0.750, 0.346,
        0.500,  0.809,  0.309,  0.500,  0.809,  0.309, 0.750, 0.654,
        0.851,  0.526,  0.000,  0.851,  0.526,  0.000, 0.925, 0.500,
        0.809,  0.309,  0.500,  0.809,  0.309,  0.500, 0.905, 0.750,
        0.851, -0.526,  0.000,  0.851, -0.526,  0.000, 0.925, 0.500,
        1.000,  0.000,  0.000,  1.000,  0.000,  0.000, 1.000, 0.500,
        0.809, -0.309,  0.500,  0.809, -0.309,  0.500, 0.905, 0.750,
        0.526,  0.000, -0.851,  0.526,  0.000, -0.851, 0.763, 0.075,
        0.809,  0.309, -0.500,  0.809,  0.309, -0.500, 0.905, 0.250,
        0.809, -0.309, -0.500,  0.809, -0.309, -0.500, 0.905, 0.250,
        0.309,  0.500, -0.809,  0.309,  0.500, -0.809, 0.654, 0.095,
        -0.526,  0.000, -0.851, -0.526,  0.000, -0.851, 0.237, 0.075,
        -0.309,  0.500, -0.809, -0.309,  0.500, -0.809, 0.346, 0.095,
        0.000,  0.000, -1.000,  0.000,  0.000, -1.000, 0.500, 0.000,
        0.000, -0.851, -0.526,  0.000, -0.851, -0.526, 0.500, 0.237,
        -0.309, -0.500, -0.809, -0.309, -0.500, -0.809, 0.346, 0.095,
        0.309, -0.500, -0.809,  0.309, -0.500, -0.809, 0.654, 0.095,
        0.500, -0.809, -0.309,  0.500, -0.809, -0.309, 0.750, 0.346,
        0.000, -0.851,  0.526,  0.000, -0.851,  0.526, 0.500, 0.763,
        0.000, -1.000,  0.000,  0.000, -1.000,  0.000, 0.500, 0.500,
        0.500, -0.809,  0.309,  0.500, -0.809,  0.309, 0.750, 0.654,
        -0.851, -0.526,  0.000, -0.851, -0.526,  0.000, 0.075, 0.500,
        -0.500, -0.809, -0.309, -0.500, -0.809, -0.309, 0.250, 0.346,
        -0.500, -0.809,  0.309, -0.500, -0.809,  0.309, 0.250, 0.654,
        -0.809, -0.309,  0.500, -0.809, -0.309,  0.500, 0.095, 0.750,
        -0.309, -0.500,  0.809, -0.309, -0.500,  0.809, 0.346, 0.905,
        0.309, -0.500,  0.809,  0.309, -0.500,  0.809, 0.654, 0.905,
        -1.000,  0.000,  0.000, -1.000,  0.000,  0.000, 0.000, 0.500,
        -0.809, -0.309, -0.500, -0.809, -0.309, -0.500, 0.095, 0.250,
        -0.809,  0.309, -0.500, -0.809,  0.309, -0.500, 0.095, 0.250],

    "indices" : [ 1, 2, 0, 4, 1, 3, 2, 4, 5, 4, 2, 1, 7, 8, 6, 1, 7, 3, 8, 1, 0, 1, 8, 7,10,11, 9, 8,10, 6,
        11, 8, 0, 8,11,10,11,12, 9,13,11, 0,12,13,14,13,12,11,13,15,14, 2,13, 0,15, 2, 5, 2,15,13,
        17,18,16,15,17,14,18,15, 5,15,18,17,20,21,19,17,20,14,21,17,16,17,21,20,22,20,19,12,22, 9,
        20,12,14,12,20,22,24,25,23,22,24, 9,25,22,19,22,25,24,27,28,26,25,27,23,28,25,19,25,28,27,
        29,21,16,28,29,26,21,28,19,28,21,29,31,32,30,29,31,26,32,29,16,29,32,31,34,35,33,31,34,26,
        35,31,30,31,35,34,36,37, 3,35,36,33,37,35,30,35,37,36, 4,38, 5,37, 4, 3,38,37,30,37,38, 4,
        38,18, 5,32,38,30,18,32,16,32,18,38, 7,36, 3,39, 7, 6,36,39,33,39,36, 7,39,40,33,41,39, 6,
        40,41,23,41,40,39,41,24,23,10,41, 6,24,10, 9,10,24,41,27,40,23,34,27,26,40,34,33,34,40,27]

};

var rotorBlade = {

    primitiva : WebGLRenderingContext.TRIANGLE_STRIP,

    "vertices" : [],

    "indices" : []

};
let rotorPoints = 10;
let leftEdge = (t) => -(t*t)/0.33333 + 0.5;
let rightEdge = (t) => -(t*t)/0.5 - 0.5;
let inclinationLeft = (t) => -(t*t)/0.5 + 1;
let inclinationRight = (t) => -(t*t)/1;
let points = [];
for (let i = 0; i < rotorPoints; i++) {
    let t = i / (rotorPoints - 1);
    let y = t;
    let z1 = inclinationLeft(t);
    let z2 = inclinationRight(t);
    let x1 = leftEdge(t);
    let x2 = rightEdge(t);
    let normal = vec3.fromValues(0,1,0);
    points.push([x1, y, z1,0,1,0,x1,z1]);

    if(x2 >= x1){
        break;
    }
    points.push([x2, y, z2,0,1,0,x2,z2]);}

let indices = [];
for (let i in points) {
    indices.push(i);
}
let reversedIndices = indices.slice(0, indices.length-1).reverse();
indices = indices.concat(reversedIndices);

points = points.flat();
rotorBlade.vertices = points;

rotorBlade.indices = indices;